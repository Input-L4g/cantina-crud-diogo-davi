<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Nova Ementa Digital</title>
        <link rel="stylesheet" href="../static/css/base.css" />
        <link rel="stylesheet" href="../static/css/style.css">
    </head>
    <body>
        <header>
            <p>Nova Ementa digital</p>
        </header>
        <main>
            <div class="table">
                <div class="column checkbox">
                    <div class="cell header">
                        <div class="all-checkbox">
                            <input type="checkbox" />
                        </div>
                    </div>
                    <div class="cell">
                        <input type="checkbox" />
                    </div>
                </div>
                <div class="column name">
                    <div class="cell header">
                        <p>NOME</p>
                    </div>
                    <div class="cell">
                        <p>Coxinha</p>
                    </div>
                </div>
                <div class="column category">
                    <div class="cell header">
                        <p>CATEGORIA</p>
                    </div>
                    <div class="cell">
                        <p>Salgado</p>
                    </div>
                </div>
                <div class="column price">
                    <div class="cell header">
                        <p>PRE√áO</p>
                    </div>
                    <div class="cell">
                        <p>R$ 9.50</p>
                    </div>
                </div>
                <div class="column action">
                    <div class="cell header">
                        <p>A√á√ÉO</p>
                        <button id="btn-delete-selected">
                            <img src="./img/delete-icon.webp" />
                        </button>
                    </div>
                    <div class="cell">
                        <p>ALGO</p>
                    </div>
                </div>
            </div>
        </main>
        <div class="overlay">
            <dialog>
                <div class="dialog-container">
                    <div class="head delete-selected">
                        <p id="dialog-text">
                            Tem certeza que deseja excluir todos os
                            selecionados?
                        </p>
                    </div>
                    <div class="tail">
                        <button class="btn-red-dialog">EXCLUIR</button>
                        <button class="btn-green-dialog">CONFIRMAR</button>
                    </div>
                    <div class="head search">
                        <h2>Buscar e Ordenar</h2>
                        <input
                            type="text"
                            placeholder="Buscar Produto..."
                            class="search-input" />
                        <label for="order-by">Ordenar por:</label>
                        <select id="order-by" class="order-select">
                            <option>Mais recente</option>
                            <option>Nome (A-Z)</option>
                            <option>Pre√ßo (maior)</option>
                        </select>
                    </div>
                    <div class="head add-product">
                        <h2> Adicionar Produto </h2>
                        <label> Nome: </label>
                        <input  class="nome add-product" type='text' placeholder="EX: Coxinha">
                        <p>Categoria:</p> <select class="category-add-product">
                        <option>Salgado</option>
                        <option>Bebida</option>
                        <option>Refei√ß√µes</option>
                        <option>Guloseimas</option>
                        <p>Pre√ßo</p> <input  class="preco add-product" placeholder="R$  0,00">
                    </div>
                </div>
            </dialog>
        </div>

        <div class="fixed-actions-container">
            <button id="search-icon" class="fixed-lupa-button">üîç</button>
            <button id="btn-add" class="fixed-add-button">+</button>
            </div>
        <script>
      const dialog = document.querySelector("dialog");
      /** @type {HTMLDivElement} */
      const dialogContainer = document.querySelector(".dialog-container");
      /** @type {HTMLDivElement} */
      const overlay = document.querySelector(".overlay");
      const btnOpenDialog = document.querySelector("#btn-delete-selected");
      const overlayOpenEvent = new Event("overlayOpen");
      const overlayCloseEvent = new Event("overlayClose");
      const searchIcon = document.getElementById('search-icon');
      const searchModal = document.getElementById('search-drawer');
      const closeButton = document.getElementById('close-drawer-button');
      let currentInterval = null;

      document.addEventListener("overlayOpen", () => {
        dialog.show();
        dialogContainer.style.opacity = "1";
        dialog.style.zIndex = "101";
        overlay.style.zIndex = "100";
      });
      document.addEventListener("overlayClose", () => {
        if (currentInterval !== null) clearInterval(currentInterval);
        const handler = () => {
          dialog.close();
          overlay.style.zIndex = "-1";
        };
        dialogContainer.style.opacity = "0";
        currentInterval = (handler, 200);
        if (overlay.style.zIndex !== "-1") overlay.style.zIndex = "-1";
        if (dialog.open) dialog.close();
      });
      btnOpenDialog.addEventListener("click", () => {
        document.dispatchEvent(overlayOpenEvent);
      });
      document.addEventListener("keydown", (key) => {
        if (key.key === "Escape") {
          document.dispatchEvent(overlayCloseEvent);
        }
      });
      overlay.addEventListener("click", () => {
        document.dispatchEvent(overlayCloseEvent);
      });
      searchIcon.addEventListener('click', () => {
        searchDrawer.classList('is-open');

        overlay.classList.add('is-active');
      });
    </script>
    </body>
</html>
